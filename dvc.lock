schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cnnClassifier/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 8888da4349357030d407e98918990665
      size: 987
    - path: params.yaml
      hash: md5
      md5: 5944f10900c10bed684fee99693a7ea9
      size: 684
    - path: src/cnnClassifier/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 791c183f381123ea1ffbcc6771e0ff74
      size: 3978
    outs:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
  prepare_base_model:
    cmd: python src/cnnClassifier/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
    - path: config/config.yaml
      hash: md5
      md5: 8888da4349357030d407e98918990665
      size: 987
    - path: params.yaml
      hash: md5
      md5: 5944f10900c10bed684fee99693a7ea9
      size: 684
    - path: src/cnnClassifier/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 7e6d95b985c658df0936583018f632ff
      size: 4139
    params:
      params.yaml:
        CLASSES: 4
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE_FINE: 0.0001
        LEARNING_RATE_HEAD: 0.001
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 4af355806f3e68543f28cde875e7cfd2.dir
      size: 143553272
      nfiles: 2
  training:
    cmd: python src/cnnClassifier/pipeline/stage_03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 4af355806f3e68543f28cde875e7cfd2.dir
      size: 143553272
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 8888da4349357030d407e98918990665
      size: 987
    - path: params.yaml
      hash: md5
      md5: 5944f10900c10bed684fee99693a7ea9
      size: 684
    - path: src/cnnClassifier/pipeline/stage_03_model_trainer.py
      hash: md5
      md5: f61b139c0274c3bbc0af5d4b6283d704
      size: 4000
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        EPOCHS_FINE: 5
        EPOCHS_HEAD: 2
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: e566d33d1cef0afee7111d6759e22996
      size: 192678984
  evaluation:
    cmd: python src/cnnClassifier/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
    - path: artifacts/training/model.h5
      hash: md5
      md5: e566d33d1cef0afee7111d6759e22996
      size: 192678984
    - path: config/config.yaml
      hash: md5
      md5: 8888da4349357030d407e98918990665
      size: 987
    - path: params.yaml
      hash: md5
      md5: 5944f10900c10bed684fee99693a7ea9
      size: 684
    - path: src/cnnClassifier/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: 383ddd7793608855229743477090413f
      size: 4125
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 0a2351b8b3212b3c65280d99a80eca1c
      size: 59
