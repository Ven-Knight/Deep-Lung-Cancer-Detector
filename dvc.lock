schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cnnClassifier/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 68c7848abea55f425930704309ebb1c3
      size: 936
    - path: params.yaml
      hash: md5
      md5: 370e47221f3d3009e3ad43dffe80f28b
      size: 685
    - path: src/cnnClassifier/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 8fdc382a7820c4fa88c9c125b00a46a5
      size: 4001
    outs:
    - path: artifacts/data_ingestion/lung_colon_ct_scan_image_set
      hash: md5
      md5: 8ee7f4e4308a338e0db0b6826e0af886.dir
      size: 1889443507
      nfiles: 25000
  prepare_base_model:
    cmd: python src/cnnClassifier/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: artifacts/data_ingestion/lung_colon_ct_scan_image_set
      hash: md5
      md5: 8ee7f4e4308a338e0db0b6826e0af886.dir
      size: 1889443507
      nfiles: 25000
    - path: config/config.yaml
      hash: md5
      md5: 68c7848abea55f425930704309ebb1c3
      size: 936
    - path: params.yaml
      hash: md5
      md5: 370e47221f3d3009e3ad43dffe80f28b
      size: 685
    - path: src/cnnClassifier/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: ac25a133b760b9d63591657cb8f4349c
      size: 4162
    params:
      params.yaml:
        CLASSES: 5
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE_FINE: 0.0001
        LEARNING_RATE_HEAD: 0.001
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 8d3092401a99cb3de13ca54f97696cd4.dir
      size: 143554296
      nfiles: 2
  training:
    cmd: python src/cnnClassifier/pipeline/stage_03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/lung_colon_ct_scan_image_set
      hash: md5
      md5: 8ee7f4e4308a338e0db0b6826e0af886.dir
      size: 1889443507
      nfiles: 25000
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 8d3092401a99cb3de13ca54f97696cd4.dir
      size: 143554296
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 68c7848abea55f425930704309ebb1c3
      size: 936
    - path: params.yaml
      hash: md5
      md5: 370e47221f3d3009e3ad43dffe80f28b
      size: 685
    - path: src/cnnClassifier/pipeline/stage_03_model_trainer.py
      hash: md5
      md5: 8f650f8513149c15a78eaf2207a0f479
      size: 4023
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 32
        EPOCHS_FINE: 10
        EPOCHS_HEAD: 5
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: e4c6a438ba25f70c05ec02e490d45cf5
      size: 192682056
  evaluation:
    cmd: python src/cnnClassifier/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/lung_colon_ct_scan_image_set
      hash: md5
      md5: 8ee7f4e4308a338e0db0b6826e0af886.dir
      size: 1889443507
      nfiles: 25000
    - path: artifacts/training/model.h5
      hash: md5
      md5: e4c6a438ba25f70c05ec02e490d45cf5
      size: 192682056
    - path: config/config.yaml
      hash: md5
      md5: 68c7848abea55f425930704309ebb1c3
      size: 936
    - path: params.yaml
      hash: md5
      md5: 370e47221f3d3009e3ad43dffe80f28b
      size: 685
    - path: src/cnnClassifier/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: 8e581bda1ea293e4b780a2688f1dc058
      size: 4810
    params:
      params.yaml:
        BATCH_SIZE: 32
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 5f7902801bd9f66cb85e9577fe0d5426
      size: 75
