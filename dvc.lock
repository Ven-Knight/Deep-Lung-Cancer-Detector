schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/cnnClassifier/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 9af1a114cc6d7e36cc21d293fb75e96c
      size: 1033
    - path: params.yaml
      hash: md5
      md5: 96f85d315705e0e9259275a36636e8ca
      size: 684
    - path: src/cnnClassifier/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 791c183f381123ea1ffbcc6771e0ff74
      size: 3978
    outs:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
  prepare_base_model:
    cmd: python src/cnnClassifier/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
    - path: config/config.yaml
      hash: md5
      md5: 9af1a114cc6d7e36cc21d293fb75e96c
      size: 1033
    - path: params.yaml
      hash: md5
      md5: 96f85d315705e0e9259275a36636e8ca
      size: 684
    - path: src/cnnClassifier/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 7e6d95b985c658df0936583018f632ff
      size: 4139
    params:
      params.yaml:
        CLASSES: 4
        IMAGE_SIZE:
        - 224
        - 224
        - 3
        INCLUDE_TOP: false
        LEARNING_RATE_FINE: 0.0001
        LEARNING_RATE_HEAD: 0.001
        WEIGHTS: imagenet
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 1031327c78b3322c2d073ca832b4984f.dir
      size: 143553272
      nfiles: 2
  training:
    cmd: python src/cnnClassifier/pipeline/stage_03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 1031327c78b3322c2d073ca832b4984f.dir
      size: 143553272
      nfiles: 2
    - path: config/config.yaml
      hash: md5
      md5: 9af1a114cc6d7e36cc21d293fb75e96c
      size: 1033
    - path: params.yaml
      hash: md5
      md5: 96f85d315705e0e9259275a36636e8ca
      size: 684
    - path: src/cnnClassifier/pipeline/stage_03_model_trainer.py
      hash: md5
      md5: f61b139c0274c3bbc0af5d4b6283d704
      size: 4000
    params:
      params.yaml:
        AUGMENTATION: true
        BATCH_SIZE: 16
        EPOCHS_FINE: 2
        EPOCHS_HEAD: 2
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: artifacts/training/model.h5
      hash: md5
      md5: ee7eaf1eaf0de478c44b6e470d1e018c
      size: 192678984
  evaluation:
    cmd: python src/cnnClassifier/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_ingestion/chest_ct_scan_images_small
      hash: md5
      md5: b1986da12e82a4e081de18d5c055764a.dir
      size: 52400272
      nfiles: 400
    - path: artifacts/training/model.h5
      hash: md5
      md5: ee7eaf1eaf0de478c44b6e470d1e018c
      size: 192678984
    - path: config/config.yaml
      hash: md5
      md5: 9af1a114cc6d7e36cc21d293fb75e96c
      size: 1033
    - path: params.yaml
      hash: md5
      md5: 96f85d315705e0e9259275a36636e8ca
      size: 684
    - path: src/cnnClassifier/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: cedf2cfc050f286cd0acd32445c7cce9
      size: 4787
    params:
      params.yaml:
        BATCH_SIZE: 16
        IMAGE_SIZE:
        - 224
        - 224
        - 3
    outs:
    - path: scores.json
      hash: md5
      md5: 04b08e0b9f9e5e6635808fb33a4ff4f7
      size: 73
